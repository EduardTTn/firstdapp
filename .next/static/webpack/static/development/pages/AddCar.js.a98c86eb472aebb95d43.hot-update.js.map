{"version":3,"file":"static/webpack/static/development/pages/AddCar.js.a98c86eb472aebb95d43.hot-update.js","sources":["webpack:///./pages/AddCar.js"],"sourcesContent":["import React, {Component} from 'react';\nimport instance from '../components/carrecord.js';\nimport Head from \"next/head\";\nimport {Button, Container, Dropdown, Form, Image, Menu, Message, Segment} from \"semantic-ui-react\";\nimport web3 from \"../components/web3.js\"\nimport Link from 'next/link';\nimport FixedMenuLayout from \"../components/footer\";\nimport SimpleSnackbar from \"../components/snackbar\";\n\n\n\nclass AddCar extends Component{\n    componentWillMount(){\n        this.loadBlockchainData()\n    }\n\n    async loadBlockchainData() {\n        let accounts = await web3.eth.getAccounts();\n        this.setState({isOwner: await instance.methods.checkIfOwner(accounts[0]).call()});\n        this.setState({isAdmin: await instance.methods.checkIfAdmin(accounts[0]).call()});\n\n    }\n\n    state = {\n        VIN: '',\n        brand:'',\n        year:'',\n        color: '',\n        license: '',\n        loading: false,\n        errorMessage:'',\n        isOwner: false,\n        isAdmin: false\n\n    };\n\n    onSubmit = async event => {\n\n\n\n        try {\n            event.preventDefault();\n            this.setState({accounts: await web3.eth.getAccounts()});\n            this.setState({loading: true, errorMessage: ''});\n\n            if (this.state.year >= 1900 && this.state.year <= 2019) {\n                 if  (this.state.VIN === '' || this.state.brand === '' || this.state.year === '' || this.state.color === '' || this.state.license === '') {\n                    this.setState({errorMessage: \"Fields can't be empty\"});\n                }\n                 else  await instance.methods.addCar(this.state.VIN, this.state.brand, this.state.year, this.state.color, this.state.license).send({\n                     from: this.state.accounts[0]});\n                 }\n             else this.setState({errorMessage: \"Invalid year\"});\n\n\n        } catch (err) {\n            this.setState({errorMessage: err.message});\n\n\n\n\n\n        this.setState({loading: false});\n        }\n    };\n\n\n    handleAddVIN = event => {\n        event.preventDefault();\n        this.setState({VIN: event.target.value});\n        this.setState({errorMessage: ''});\n    };\n\n\n    handleAddBrand = event => {\n        event.preventDefault();\n        this.setState({brand: event.target.value});\n        this.setState({errorMessage: ''});\n    };\n\n\n\n\n    handleAddColor = event => {\n        event.preventDefault();\n        this.setState({color: event.target.value});\n        this.setState({errorMessage: ''});\n    };\n\n\n    handleAddLicense = event => {\n        event.preventDefault();\n        this.setState({license: event.target.value});\n        this.setState({errorMessage: ''});\n    };\n    handleYear = event => {\n        event.preventDefault();\n        this.setState({year: event.target.value});\n        this.setState({errorMessage: ''});\n    };\n\n\n    render() {\n        let cardStyle = {\n            display: 'block',\n            width: '28%',\n            margin: '200px auto',\n            height: 'auto',\n        };\n\n        let formStyle = {\n            width: '100%',\n\n        };\n        let buttonStyle = {\n            margin: '4px'\n        };\n\n        console.log('anul:',this.state.year);\n\n        return(\n\n            <div>\n                <div>\n                    <Menu fixed='top' inverted>\n                        <Container>\n                            <Link href=\"/index\">\n                                <Menu.Item as='a' header>\n                                    <Image size='normal' src='https://img.icons8.com/cotton/50/000000/retro-car.png'\n                                           style={{marginLeft: '1.5em'}}/>\n                                    <h2>Car Record</h2>\n                                </Menu.Item>\n                            </Link>\n                            <Menu.Item as='a'><Link href=\"/ManageAdmin\">Manage Admin</Link></Menu.Item> :\n\n\n                            <Dropdown item simple text='Manage Cars'>\n                                <Dropdown.Menu>\n                                    <Link href=\"/AddCar\">\n                                        <Dropdown.Item as='a'>Add Car</Dropdown.Item>\n                                    </Link>\n                                    <Link href=\"/ModifyCar\">\n                                        <Dropdown.Item as='a'>Modify Car</Dropdown.Item>\n                                    </Link>\n                                    <Link href=\"/AddEvent\">\n                                        <Dropdown.Item as='a'>Add Event</Dropdown.Item>\n                                    </Link>\n                                    }\n\n\n                                </Dropdown.Menu>\n                            </Dropdown>\n\n                        </Container>\n\n                    </Menu>\n                </div>\n                <Head>\n                    <link\n                        rel=\"stylesheet\"\n                        href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\"\n                    />\n                    <style>{`\n        body {\n         background: url(\"https://images.pexels.com/photos/707047/pexels-photo-707047.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=1280&w=1900\");\n         background-repeat: no-repeat;\n         background-position: center; \n        }\n      `}</style>\n                </Head>\n\n                >\n\n\n                <Segment inverted textAlign='center' style={cardStyle}>\n                    <h2  style={{margin: '12px auto'}}> Add Car </h2>\n                    <Form inverted className={\"form-inline\"} onSubmit={this.onSubmit}\n                          error={!!this.state.errorMessage} style={formStyle}>\n                        <Form.Group inline style={{width: '90%', margin: '30px auto'}}>\n\n                            <Form.Field required style={{width: '70%', margin: '10px'}}>\n\n\n                                <Form.Input fluid label=\"VIN\" placeholder=\"VIN of the car...\"\n                                            style={{width: '100%'}}\n                                            value={this.state.VIN}\n                                            onChange={this.handleAddVIN}\n                                            error={!!this.state.errorMessage}\n                                />\n\n\n                                <Form.Input fluid label=\"BRAND:\" placeholder=\"brand of the car\"\n                                            style={{width: '96.555%'}}\n                                            value={this.state.brand}\n                                            onChange={this.handleAddBrand}\n                                            error={!!this.state.errorMessage}\n                                />\n\n\n\n\n                                <Form.Input fluid label=\"COLOR:\" placeholder=\"color of the car\"\n                                            style={{width: '96.555%'}}\n                                            value={this.state.color}\n                                            onChange={this.handleAddColor}\n                                            error={!!this.state.errorMessage}\n                                />\n\n\n                                <Form.Input fluid label=\"LICENSE:\" placeholder=\"License\"\n                                            style={{width: '96.555%'}}\n                                            value={this.state.license}\n                                            onChange={this.handleAddLicense}\n                                            error={!!this.state.errorMessage}\n                                />\n\n                                <Form.Input  label=\"YEAR:\"\n                                            style={{width: '90.555%'}}\n                                            value={parseInt(this.state.year)}\n                                             onChange={this.handleYear}\n                                            placeholder=\"Enter year of the car\"\n                                             type=\"number\"\n\n                                />\n                            </Form.Field>\n\n\n\n                            <Form.Field>\n                                <Button  onClick={this.onSubmit} color={\"purple\"}>\n                                    Make Changes\n                                </Button>\n                            </Form.Field>\n                        </Form.Group>\n                        <Message style={buttonStyle} error header={\"Error!\"} content={this.state.errorMessage}/>\n                    </Form>\n                </Segment>\n\n\n\n\n\n                <div>{this.state.loading === true ? <SimpleSnackbar/> : null}</div>\n\n                <FixedMenuLayout/>\n\n            </div>\n\n        );\n    }\n\n}\n\nexport default AddCar\n\n\n\n"],"mappings":"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","sourceRoot":""}